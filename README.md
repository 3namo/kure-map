# くれまちWi-Fi利用者マップ

呉市のWi-Fiスポットの利用者数を地図上で可視化するWebアプリケーションです。

## 機能

- 📍 **23地点のWi-Fiスポット**を地図上に表示
- 👥 **利用者数に応じた視覚化**
  - マーカーのサイズ: 利用者数に比例
  - マーカーの色: 利用者数に応じた4段階（緑・黄・橙・赤）
- 🗺️ **インタラクティブな地図**（OpenStreetMap + Leaflet.js）
- 📊 **総利用者数の表示**

## プロジェクト構造

```
kure-map/
├── index.html          # メインHTMLファイル
├── css/
│   └── styles.css      # スタイルシート
├── js/
│   └── app.js          # アプリケーションロジック
├── data/
│   └── wifi-data.json  # Wi-Fiスポットデータ
└── README.md           # このファイル
```

## 技術スタック

- **HTML5**: セマンティックマークアップ
- **CSS3**: レスポンシブデザイン
- **JavaScript (ES6+)**: 非同期データ読み込み、関数型プログラミング
- **Leaflet.js 1.9.4**: 地図ライブラリ
- **OpenStreetMap**: 地図タイル

## 使用方法

### ローカルで実行

1. リポジトリをクローン
```bash
git clone <repository-url>
cd kure-map
```

2. ローカルサーバーを起動（例: Python）
```bash
# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

3. ブラウザで開く
```
http://localhost:8000
```

**注意**: `file://` プロトコルでは動作しません。JSONファイルの読み込みにHTTPサーバーが必要です。

### 簡易的な確認（npxを使用）

```bash
npx http-server -p 8000
```

## 利用者数による色分け

| 利用者数 | マーカー色 |
|---------|----------|
| 0-50人  | 🟢 緑     |
| 51-100人 | 🟡 黄    |
| 101-150人 | 🟠 橙   |
| 151人以上 | 🔴 赤   |

## データ更新

`data/wifi-data.json` を編集することで、データを更新できます。

### データフォーマット

```json
{
  "2025/10/01": [
    {
      "Wifi名": "施設名",
      "設置場所住所": "住所",
      "緯度": "34.xxxxx",
      "経度": "132.xxxxx",
      "利用者数": "100"
    }
  ]
}
```

## コードの改善点

### Before（改善前）
- ✗ HTML、CSS、JavaScriptが1ファイルに混在
- ✗ データがハードコード
- ✗ コメントが不十分
- ✗ エラーハンドリングなし

### After（改善後）
- ✓ 関心の分離（HTML/CSS/JS/Data）
- ✓ モジュール化された関数
- ✓ JSDocコメント付き
- ✓ エラーハンドリング実装
- ✓ レスポンシブ対応
- ✓ メタタグ追加（SEO対応）
- ✓ 保守性・可読性の向上

## ブラウザ対応

- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- Edge（最新版）

## ライセンス

このプロジェクトは呉市のオープンデータを使用しています。

## 貢献

バグ報告や機能提案は、Issueを作成してください。
